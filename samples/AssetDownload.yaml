swagger: "2.0"
info:
  version: 1.0.0
  title: Asset Download Page
  description: Asset Download Page APIs

consumes:
  - application/json
produces:
  - application/json

definitions:
  volume:
    required:
      - id
    properties:
      id:
        type: integer
      alias:
        type: string
      body:
        type: string
      creation:
        type: string
      doi:
        type: string
      name:
        type: string
      owners:
        type: array
        items:
          name:
            type: string
          id:
            type: integer
      permission:
        type: integer
      publicsharefull:
        type: boolean
      publicaccess:
        type: string
    
  asset:
    required:
      - id
    properties:
      id:
        type: integer

parameters:
  id:
    name: id
    in: path
    description: ID of the volume
    required: true
    type: string
  slotid:
    name: slotid
    in: path
    description: ID of the slot
    required: false
    type: string
  slotrange:
    name: slotrange
    in: path
    description: Range of the slot
    required: false
    type: string
  assetid:
    name: assetid
    in: path
    description: ID of the asset
    required: false
    type: string

paths:
  
  /api/volume/{id}:
    parameters:
      - $ref: "#/parameters/id"

    get:
      description: Returns a volume by ID
      operationId: findVolumeById
      responses:
        default:
          description: Returns the volume data
          schema:
            $ref: "#/definitions/volume"

  /api/volume/{id}/slot/{slotid}/{slotrange}/asset/{assetid}:
    parameters:
      - $ref: "#/parameters/id"
      - $ref: "#/parameters/slotid"
      - $ref: "#/parameters/slotrange"
      - $ref: "#/parameters/assetid"

    get:
      description: Returns an asset by ID
      operationId: findAssetById
      responses:
        default:
          description: Returns the asset data
          schema:
            $ref: "#/definitions/asset"

  /:
    get:
      produces:
        - text/html
      responses:
        default:
          description: Asset Download
          schema:
            type: file
            default:
              $ref: "asset-download.html"
